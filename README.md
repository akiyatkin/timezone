php timezone detecter
=

Очень короткий скрипт для определения временой зоны/часового пояса (timezone) установленного в операционной системе пользователя - в браузере. Скрипт работает со второго запроса, так как требуется установить кукис и только потом сервер узнает временную зону. К сожалению в первом запросе в заголовках не содержится никакого намёка на часовой пояс посетителя. 

Определёное значние устанавливается в качестве временной зоны по умолчанию date_default_timezone_set и функция datе везде изменит свой вывод.

Скрипт подходит для следующего сценария. Пользователь открывает форму, что будет является первым посещением и установится кукис. Пользователь заполяет данные и отправлят форму на сервер с AJAX или переходом на новую страницу, не имеет значения, сервер уже будет знать временную зоун пользователя и сформирует корректное сообщение - что-то вроде: ваш запрос принят 05.09.2015 15:34

На сервере для хранения метки времени используется unix timestamp. Временная зона нужна только лишь для корректного отображения. В исключительной ситуации пользователь может увидеть время сервера, а не своё. Если он зашёл в новом браузере или очистил кукисы, но даже в этом случае вероятно потребуется авторизация пользователя или посещение начнётся с другй страницы где время не показывется и при следующем же переходе по ссылке всё встанет на свои места.

Enjoy
